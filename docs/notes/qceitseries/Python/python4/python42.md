---
title: Python4级知识点
tags:
    - 电子协会考级
    - Python4级
icon: tabler:hexagon-number-4-filled
createTime: 2025/03/17 13:38:41
permalink: /qceitseries/Python/python4/python42.html
---
## 1 函数相关概念
:::tip 学习要点
理解函数及过程、函数的参数、匿名函数等概念。
:::
:::info 对标内容
理解函数及过程、函数的参数等概念。
:::

### 1.1 函数的相关概念
:::tip 知识点详解
#### 1.1.1 函数的意义
- 函数是一段可以重复使用的代码，用来实现特定的功能。
- 在写一段程序的时候，需要多次用到同样的功能，如果每次都要重复写相同的代码，不仅会增加代码量，而且阅读与修改极不方便。如果把实现相同功能的代码作为一个代码块封装在一起，形成一个函数，每次需要时调用这个函数，就很方便了！
- 定义函数的代码如下所示
    ```python
    def 函数名(参数列表):
        函数体
        return 返回值
    ```
    - 函数的定义包括函数名、参数列表、函数体和返回值。
    - 函数名是函数的标识符，用来调用函数。
    - 详细举例
        ```python
        def add(x, y):
            num_add = x + y
            return num_add
        ```
        - 上述代码定义了一个名为add的函数，该函数接受两个参数x和y，并返回它们的和。
        - 运行结果
            ```console
            >>> add(1, 2)
            3
            >>> add(3, 4)
            7
            ```
#### 1.1.2 形参和实参
1. 形参是函数定义时的参数，用于接收调用函数时传入的参数。
2. 实参是函数调用时传入的参数，用于传递给函数。
- 从名字就可以看出，实参（实际参数）是一个实实在在存在的参数，是实际占用内存地址的；而形参（形式参数）只是意义上的一种参数，在定义时是不占用内存地址的。
    - ==位置实参==：在调用函数时，必须将每个实参都关联到函数定义中的每一个形参，最简单的关联方式就是基于实参的位置（顺序）。
        ```python
        def f(x,y,z):     # 首先在定义函数时传入3个形参x y z
            print(x,y,z)
        f(3,2,1)　　　　　
        #在调用该函数时，通过位置实参的方式，将实参映射到形参，一一对应.
        # 即x=3，y=2，z=1
        ```
        - 运行结果
            ```console
            3 2 1
            ```
    - ==关键字实参==：关键字实参是传递给函数的名称-值对。直接在实参中将名称和值关联起来了，因此向函数传递实参时不会混淆。
        ```python
        def f(x,y,z):
            print(x,y,z)
        f(x=3,y=2,z=1)
        ```
        - 运行结果
            ```console
            3 2 1
            ```
    - ==混合使用==
        ```python
        def f(x,y,z):
            print(x,y,z)
        f(1,z=3,y=2)
        ```
        - 运行结果
            ```console
            1 2 3
            ```
    - ==默认值==：编写函数时，可给每个形参指定默认值。在调用函数中给形参提供了实参时，Python将使用指定的实参值；否则，将使用形参的默认值。
        ```python
        def f(x,y,z=1):
            print(x,y,z)
        f(1,2)
        ```
        - 运行结果
            ```console
            1 2 1
            ```
        - 注意
            - 有默认值的形参必须放在形参列表的末尾。
            - 调用函数时，如果为形参提供了实参，那么Python将使用指定的实参值；否则，将使用该形参的默认值。
            - 在函数调用中，必须按顺序提供实参。
            - 可以混合使用位置实参和关键字实参，但必须先提供所有位置实参，再提供关键字实参。
    - ==列表和字典==：当不确定需要传入的值是多少时，在定义形参时，可以使用*args（列表）、**kwargs（字典）来表示。
        ```python
        def f(*args,**kwargs):
            print(args)
            print(kwargs)
        f(*[1,2,3,4,5],**{"y":1})   
        # 如果想让传入的值以列表或字典的形式显示出来，就需要在元素前加上*或**
        ```
        - 运行结果
            ```console
            (1, 2, 3, 4, 5)
            {'y': 1}
            ```
    - ==注意==：函数的定义必须在主程序调用语句之前出现。
#### 1.1.3 匿名函数
- 匿名函数是一种没有名字的函数，它可以在需要函数的地方直接定义和使用。
- 匿名函数的定义格式如下：
    ```python
    lambda 参数列表: 表达式
    ```
    - 其中，lambda是关键字，参数列表是函数的参数，表达式是函数的返回值。
    - 匿名函数的使用方式如下：
        ```python
        f = lambda x, y: x + y
        print(f(1, 2))
        ```
        - 运行结果
            ```console
            3
            ```
- 匿名函数通常用于需要一个函数作为参数的场合，例如map()、filter()、sorted()等函数。
    ```python
    a = [1, 2, 3, 4, 5]
    b = list(map(lambda x: x * 2, a))
    print(b)
    ```
    - 运行结果
        ```console
        [2, 4, 6, 8, 10]
        ```
    - 上述代码中，map()函数的第一个参数是一个匿名函数，第二个参数是一个列表。map()函数将列表中的每个元素都应用到匿名函数中，并返回一个新的列表。
- 匿名函数也可以作为函数的返回值使用。
    ```python
    def f(x):
        return lambda y: x + y
    g = f(1)
    print(g(2))
    ```
    - 运行结果
        ```console
        3
        ```
    - 上述代码中，f()函数返回一个匿名函数，该匿名函数接受一个参数y，并返回x+y的值。g()函数是f()函数的返回值，它接受一个参数y，并返回1+y的值。
- 匿名函数的优点是简洁，缺点是可读性差，不适合复杂的逻辑。
- 匿名函数使用关键字lambda, 冒号之前的部分表示匿名函数的参数列表，冒号之后的部分表示匿名函数的返回值，但是请注意，这部分只能为表达式，不能为赋值语句，否则会出现“can't assign to lambda”错误。
- 匿名函数不需要用return 来返回值，表达式本身的结果就是返回值。
- 在定义匿名函数时，需要将它直接赋值给一个变量，然后再像一般函数一样调用。

::::
:::caution 易错点
1. 函数的参数传递是本节重点，知识点容易混淆，要重点学习。
2. 函数的定义必须在主程序调用语句之前出现，这是由Pyhton是解释性语言的特性决定的。
:::
### 1.2 模拟考题-函数的相关概念
:::important 考题1 单选题
以下选项中，哪一个不属于函数的作用？（     ）
- A. 提高代码的执行速度[+以下选项中，哪一个不属于函数的作用A]
- B. 提高代码的重复利用率
- C. 增强代码的可读性
- D. 降低编程的复杂度
:::
[+以下选项中，哪一个不属于函数的作用A]:
    解析：函数能够提高代码的重复利用率，增强代码的可读性，降低编程的复杂度，但提高代码的执行速度不是它的特点。
:::important 考题2 单选题
关于计算圆面积的匿名函数的定义，以下哪一个语法格式是正确的？ （     ）
- A. ```lambda r:3.1415926*r*r```
- B. ```result=lambda r:3.1415926*r*r```[+关于计算圆面积的匿名函数的定义B]
- C. ```lambda r,3.1415926*r*r```
- D. ```result=lambda r,3.1415926*r*r```
:::
[+关于计算圆面积的匿名函数的定义B]:
    解析：关键字lambda表示匿名函数，冒号之前表示的是这个函数的参数，冒号之后表示的是返回值。定义匿名函数时，要将它赋值给一个变量。
:::important 考题3 判断题
代码： 
```Python
myFun=lambda a,b=2:a*b 
print(myFun(4)) 
print(myFun(5,3)) 
```
运行结果为：
```console
8 
15  
```
（  ）[+代码运行结果为8,15正确]
:::
[+代码运行结果为8,15正确]:
    ==解析==：本题考核匿名函数的定义、使用方法以及默认参数。本题中采用了两种方式来调用匿名函数myFun，
    - 第一个myFun(4)只传入一个实参，a被赋值为4，b 就使用默认值2，所以myFun(4)的结果是4×2=8；
    - 第二个myFun(5,3)传入两个实参，a被赋值为5，b的默认值2被替换为3，所以myFun(5,3)的结果是5×3=15。
## 2 自定义函数的创建与调用
:::tip 学习要点
1. 能够创建简单的自定义函数。
2. 掌握自定义函数的调用方法。
3. 理解函数的返回值。
4. 理解变量作用域、全面变量与局部变量。
:::
:::info 对标内容
1. 能够创建简单的自定义函数，掌握自定义函数的调用。
2. 理解函数的返回值、变量作用域等概念。
:::
### 2.1 函数的返回值
::::tip 知识点详解
#### 2.1.1 函数的返回值
-  函数不是直接显示输出的，它会处理一些数据并返回一个或一组值。函数用return 语句将值返回调用函数的代码行，返回值能将程序大部分繁重的工作移交到函数中去完成，从而简化主程序。
- 1. 下面是一个简单的程序，用于接收姓氏和名字，然后返回完整的人名信息。
    ```python
    def get_formatted_name(first_name, last_name):
        """返回整洁的姓名"""
        full_name = first_name + ' ' + last_name
        return full_name.title()
    musician = get_formatted_name('jimi', 'hendrix')
    print(musician)
    ```
    - 运行结果
        ```console
        Jimi Hendrix
        ```
    - 上述代码中，get_formatted_name()函数接受两个参数，即名字和姓氏，并将它们合并成一个字符串。==然后==，该函数返回这个字符串。在主程序中，我们调用get_formatted_name()函数，并将返回值赋给变量musician。==最后==，我们打印musician的值，以确认它包含了正确的姓名。
- 2. 函数可以返回任何类型的值，包括字典、列表这样较复杂的数据结构。还是上面的例子，这次返回一个表示人的字典。
    ```python
    def build_person(first_name, last_name):
        """返回一个字典，其中包含有关一个人的信息"""
        person = {'first': first_name, 'last': last_name}
        return person
    musician = build_person('jimi', 'hendrix')
    print(musician)
    ```
    - 运行结果
        ```console
        {'first': 'jimi', 'last': 'hendrix'}
        ```
#### 2.1.2 函数传递列表
- 传递列表在函数中很有用，列表中包含数字、名字甚至更复杂的对象，如下例所示。
    ```python
    def greet_users(names):
        """向列表中的每位用户都发出简单的问候"""
        for name in names:
            msg = "Hello, " + name.title() + "!"
            print(msg)
    usernames = ['hannah', 'ty', 'margot']
    greet_users(usernames)
    ```
    - 运行结果
        ```console
        Hello, Hannah!
        Hello, Ty!
        Hello, Margot!
        ```
    ==思考==:对于带返回值的函数与对于带默认值的函数
    - 对于带返回值的函数，输入并运行以下代码。
        ```python
        def fact(n):
            factorial=1
            for counter in range(1,n+1):
                factorial *=counter
            return factorial
        n=int(input('calculate n! Enter n=?'))
        print(n,'!=',fact(n))
        ```    
    - 对于带默认值的函数，输入并运行以下代码。
        ```python
        def rt1(a=3):
        for n in range(a):
            for m in range(n+1):
                print('*',end='')
            print()
        rt1()
        rt1(5)
        ``` 
::::
:::caution 易错点
1. 比对带返回值与不带返回值的自定义函数的差别，理解它们的含义。
2. 在函数中用return语句将值返回调用函数的代码行。
:::
#### 2.1.3 模拟考题-函数的返回值
:::important 考题1 单选题
关于以下程序，下列表述中错误的一项是（     ）。
```python
def demo(n): 
    s=1 
    for i in range(1,n): 
        s*=i 
return s
```
- A. demo(n) 函数的功能是求n的阶乘[+关于以下程序，下列表述中错误的一项是A]
- B. s是局部变量
- C. n是形参
- D. range() 函数是Python内置函数
:::
[+关于以下程序，下列表述中错误的一项是A]:
    解析：demo(n)函数的功能是求阶乘，range(1,n)是从1循环到n-1。
:::important 考题2 单选题
运行以下程序，输出结果正确的是（     ）。
```python
def demo(x): 
    return x*2; 
print(demo(demo(demo(1))))
```
- A. 1    B. 2    C. 4    D. 8[+运行以下程序，输出结果正确的是D]
:::
[+运行以下程序，输出结果正确的是D]:
    解析：函数被调用3次，1乘以2，再乘以2，再乘以2，结果为8。
:::important 考题3 判断题
函数体中必须包含return语句。（     ）[+函数体中必须包含return语句错误]
:::
[+函数体中必须包含return语句错误]:
    解析：自定义函数可以没有返回值。
### 2.2 全局变量和局部变量
::::tip 知识点详解
- 一般定义在程序最开始处的变量称为全局变量，而在函数中定义的变量称为局部变量。可以简单理解为，无缩进的为全局变量，有缩进的是局部变量。
- ==全局变量==的作用域是整个程序，而==局部变量==的作用域是函数内部。
- 当程序运行时，首先会找程序内部有没有局部变量，==如果有==，则调用；==如果没有==，才去调用全局变量。
    ```python
    name='zhang'    # 全局变量
    def f():
        name="li"   # 局部变量 
        print(name)
    f()
    ```
    - 运行结果
        ```console
        li
        ```
        - 调用f()函数，程序会先在函数内部找有没有name这个变量，如果有，就会使用该name的值；而如果没有定义局部变量name，函数再去找全局变量name。
- 可以通过global关键字，通过局部变量修改全局变量的值，如下例所示。
    ```python
    name='zhang'    # 全局变量
    def f():
        global name
        name="li"   # 局部变量
        print(name)
    f()
    print(name)
    ```
    - 运行结果
        ```console
        li
        li
        ```
        - 上述代码中，在函数f()中使用global关键字，声明name是全局变量，这样就可以在函数内部修改全局变量的值了。
        - ==注意==：在函数内部修改全局变量的值时，要使用global关键字，否则会创建一个新的局部变量。
        - global 与 nonlocal 的区别：
            - global 关键字用来在定义局部变量的同时，修改全局变量的值；
            - nonlocal关键字用来在函数或局部作用域使用外层（非全局）变量。
                ```python
                def outer():
                    x = "outer"
                    def inner():
                        nonlocal x
                        x = "inner"
                    inner()
                    print("outer:", x)
                outer()
                ```
                - 运行结果
                    ```console
                    outer: inner
                    ```
                    - 上述代码中，在函数inner()中使用nonlocal关键字，声明x是外层变量，这样就可以在函数内部修改外层变量的值了。
#### 2.2.1 思考
1. 对于局部变量作用域，输入下列代码，并运行试试。
    ```python
    def f1():
        x=5
        y=6
        print(x+y)
    def f2():   # 改为 (x)
        y=1
    print(x+y)  # 出错！不能引用 f1（）中的x
    f1()
    f2(5)
    ```
    - 调用f2(5)时出错了，处理办法有以下两种。
        方法1：将“def f2():”改为“def f2(x):”。
        方法2：将“x=5”从f1()中移出来，使x变为全局变量。
2. 如果在函数中定义的局部变量与全局变量同名，则调用函数时，局部变量屏蔽全局变量。输入下列代码，并运行试试。
    ```python
    x='outside'
    y='global'
    def f():
        x='inside'
        print(x)
        print(y)
    f()
    print(x)
    ```
    - 运行结果
        ```console
        inside
        global
        outside
        ```
::::
:::caution 易错点
1. 理解global与nonlocal关键字的区别和它们各自的用法。
2. 如果在函数中定义的局部变量与全局变量同名，则调用函数时，局部变量屏蔽全局变量。
:::
#### 2.2.2 模拟考题-全局变量和局部变量
:::important 考题1 单选题
运行以下程序，输出的结果是（     ）。
```python
x=1
def demo(): 
    global x 
    x=2 
    print(x) 
demo() 
print(x)
```
- A. 
```console
1
1
```
- B.
```console
2
1 
```
- C.
```console
1
2 
```
- D.[+运行以下程序，输出的结果是D]
```console
2
2
```

:::
[+运行以下程序，输出的结果是D]:
    解析：Python中定义函数时，若想在函数内部对函数外的变量进行操作，就需要在函数内部声明其为global，以改变它的值。
:::important 考题2 单选题
运行以下代码，正确的结果是（     ）。
```python
def f(s):
    t=0
    max=0
    for i in s:
        if i>="0" and i<="9":
            t=t+1
        else:
            if t>max:
                max=t
            t=0
     print(max)
list="123ab45cd6d"
f(list)
```
- A. 0    B. 1    C. 2    D. 3[+运行以下代码，正确的结果是D]
:::
[+运行以下代码，正确的结果是D]:
    解析：本段代码中，函数f()的作用是求最长的连续数字字符串的长度。
:::important 考题3 判断题
调用嵌套函数outer()，两次输出变量x的值是不一样的。（     ）[+调用嵌套函数outer()，两次输出变量x的值是不一样的正确]
```python
def outer():
     x = "local"
     def inner():
         x = 'nonlocal' 
         print("inner:", x)
     inner()
     print("outer:", x)。
```
:::
[+调用嵌套函数outer()，两次输出变量x的值是不一样的正确]:
    解析：在嵌套函数中，其内部与外部相同名称的变量是互不影响的，所以两次输出变量x的值是不一样的。
### 2.3 为函数的参数和返回值指定类型
::::tip 知识点详解
- Python 是动态类型语言，新建变量时不需要声明与指定类型，自定义函数时也是如此。
- 但是，Python 3.5之后的版本就新增了对函数参数和返回值的类型指定和检查，新建变量时也可以指定类型。
- 例如下面这个函数，指定了输入参数a的类型为int，而b的类型为str，并且返回值的类型为srt。
- 可以看到，调用此函数，最终返回了一个字符串。
    ```python
    def add(a: int, b: str) -> str:
        return str(a) + b
    print(add(1, '2'))
    ```
    - 运行结果
        ```console
        12
        ```
    - 当我们调用这个函数时，如果参数a输入的是字符串，实际上运行不会报错，毕竟Python的本质还是动态类型语言。
        ```python
        def f(a: int, b: str) -> str:
            print(a,b)
            return 500
        f('1','2')
        ```
        - 运行结果
            ```console
            1 2
            ```
::::
:::caution 易错点
1. Python 3.5之后的版本新增了对函数参数和返回值的类型指定和检查，新建变量时也可以指定类型。
2. 如果参数a输入的类型不匹配，实际上运行时不会报错。
:::
#### 2.3.1 模拟考题-为函数的参数和返回值制定类型
::::important 考题1 编程题
- 设计一个算法，根据邮件的重量和用户是否选择加急计算邮费。
- ==计算规则==：
    - 重量在1000克以内（含1000克），基本邮费8元。
    - 超过1000克的部分，每500克加收超重费4元，不足500克部分按500克计算。
    - 如果用户选择加急，多收5元。
- 根据上述计算规则，编写自定义函数完成程序功能，或补全代码。
- 描述：根据邮件的重量和用户是否选择加急计算邮费。
- 函数名：postage(w:int, f:str)->int
- 参数表：w代表邮件的重量（整数）。f是表示是否加急的字符串，其中'y'和'n' 分别表示加急和不加急。
- 返回值：返回邮费（整数）。
- 示例：当w=1200，f='y'时，返回17。
:::code-tabs
@tab 待补全
```python :collapsed-lines=5
def postage(w:int, f:str)->int:
    if f == 'y':
        cost =   ①  
    else:
        cost =  ②  
    if w > 1000:
        cost +=  ③  
        if w % 500 > 0:
            cost += 4
    return cost 
w = int(input(' 邮件的重量：'))
f = input(' 是否加急：')
print(postage(w, f))
```
@tab Python
```python :collapsed-lines=5
def postage(w:int, f:str)->int:
    if f == 'y':
        cost = 13    # 加急：基本邮费8元 + 加急费5元
    else:
        cost = 8     # 不加急：只收基本邮费8元
    if w > 1000:
        cost += ((w - 1000) // 500) * 4    # 超过1000克的部分，每500克加收4元
        if w % 500 > 0:
            cost += 4    # 不足500克按500克计算，也要加收4元
    return cost 

w = int(input(' 邮件的重量：'))
f = input(' 是否加急：'))
print(postage(w, f))
```
:::
::::
## 3 递归与递推
## 4 分治算法
## 5 算法优化
## 6 第三方库（模块）的获取、安装与调用